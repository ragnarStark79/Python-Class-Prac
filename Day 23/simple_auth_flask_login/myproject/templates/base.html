<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Flask Auth - Welcome</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>

<body>
    <!-- Skeleton Loading Screen -->
    <div id="skeleton-loader">
        <div class="skeleton-box mb-4" style="width: 200px; height: 30px;"></div>
        <div class="skeleton-box mb-3" style="width: 300px; height: 200px; border-radius: 16px;"></div>
        <div class="skeleton-box" style="width: 150px; height: 40px; border-radius: 10px;"></div>
    </div>

    <!-- Main Content Wrapper (Hidden initially) -->
    <div id="main-content" style="opacity: 0; min-height: 100vh; display: flex; flex-direction: column;">

        <!-- Navigation Bar -->
        <nav class="navbar navbar-expand-lg navbar-custom sticky-top">
            <div class="container">
                <a class="navbar-brand" href="{{ url_for('home') }}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="me-2" style="color: var(--accent-sage);">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                    AuthFlow
                </a>
                <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto align-items-center">
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('home') }}">Home</a>
                        </li>
                        {% if current_user.is_authenticated %}
                        <li class="nav-item ms-lg-3 mt-2 mt-lg-0">
                            <a class="nav-link" href="{{ url_for('welcome_user') }}">Dashboard</a>
                        </li>
                        <li class="nav-item ms-lg-2 mt-2 mt-lg-0">
                            <a class="btn btn-outline-danger px-3 py-1 rounded-pill" style="font-size: 0.9rem;"
                                href="{{ url_for('logout') }}">Logout</a>
                        </li>
                        {% else %}
                        <li class="nav-item ms-lg-2 mt-2 mt-lg-0">
                            <a class="nav-link" href="{{ url_for('login') }}">Login</a>
                        </li>
                        <li class="nav-item ms-lg-3 mt-2 mt-lg-0">
                            <a class="btn btn-nav-primary" href="{{ url_for('register') }}">Get Started</a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Flash Messages -->
        <div class="container mt-4">
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <!-- Using alert-info as default if category isn't specified conventionally in routes -->
            <div class="alert alert-success alert-custom alert-dismissible fade show shadow-sm animate-fade-up"
                role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}
        </div>

        <!-- Render Content -->
        <main class="flex-grow-1">
            {% block content %}
            {% endblock %}
        </main>

        <!-- Footer -->
        <footer class="mt-auto py-4 text-center">
            <div class="container">
                <span style="color: var(--text-secondary); font-size: 0.9rem;">&copy; 2026 AuthFlow Interface. All
                    rights reserved.</span>
            </div>
        </footer>

    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <!-- Skeleton Loader Script -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Fake loading delay to let skeleton play
            setTimeout(function () {
                const loader = document.getElementById('skeleton-loader');
                const content = document.getElementById('main-content');

                loader.style.opacity = '0';

                setTimeout(() => {
                    loader.style.display = 'none';
                    content.style.opacity = '1';
                    content.style.transition = 'opacity 0.6s ease';
                }, 500); // Wait for transition fade out
            }, 800); // 800ms loading time
        });
    </script>
</body>

</html>